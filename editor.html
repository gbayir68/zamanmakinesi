<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ZAMAN EDİTÖRÜ - PRO</title>
    
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" href="icon.png">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { background: #000; color: #fff; font-family: 'Montserrat', sans-serif; min-height: 100vh; display: flex; flex-direction: column; align-items: center; padding: 20px 15px; }
        .warp-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at center, #1a0033 0%, #000 80%); z-index: -1; }

        .container { width: 100%; max-width: 500px; z-index: 10; background: rgba(15, 15, 15, 0.98); padding: 25px; border-radius: 25px; border: 1px solid #333; box-shadow: 0 15px 50px rgba(0,0,0,1); }
        
        h1 { font-family: 'Orbitron'; font-size: 0.9rem; text-align: center; color: #00ff41; margin-bottom: 25px; letter-spacing: 3px; }
        
        .field { margin-bottom: 20px; }
        .label { display: block; font-size: 0.65rem; color: #666; margin-bottom: 10px; font-family: 'Orbitron'; letter-spacing: 1px; text-transform: uppercase; }
        
        /* GÜN AY YIL SEÇİCİLER (PC VE MOBİL UYUMLU) */
        .date-row { display: flex; gap: 10px; margin-bottom: 10px; }
        select { flex: 1; background: #000; color: #00ff41; border: 1px solid #00ff41; padding: 15px 5px; border-radius: 12px; font-family: 'Orbitron'; font-size: 0.9rem; outline: none; cursor: pointer; }

        /* METİN ALANI */
        textarea { width: 100%; height: 180px; padding: 15px; border-radius: 15px; border: 1px solid #444; background: #050505; color: #fff; font-family: 'Montserrat'; font-size: 1.1rem; line-height: 1.6; resize: none; outline: none; }

        /* ARAÇ ÇUBUĞU (MİKROFON, KLAVYE, YAPIŞTIR) */
        .toolbar { display: flex; justify-content: space-around; margin: 15px 0; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 15px; border: 1px solid #222; }
        .tool-btn { display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; color: #aaa; transition: 0.3s; }
        .tool-btn svg { width: 30px; height: 30px; fill: currentColor; }
        .tool-btn span { font-size: 0.6rem; font-family: 'Orbitron'; font-weight: bold; }
        
        .tool-btn:hover { color: #00ff41; }
        .tool-btn.active { color: #ff3131; animation: pulse 1s infinite; }

        /* BUTONLAR */
        .btn-group { display: flex; flex-direction: column; gap: 12px; }
        button { padding: 20px; border-radius: 50px; border: none; font-family: 'Orbitron'; cursor: pointer; font-weight: bold; font-size: 1rem; transition: 0.2s; }
        .btn-add { background: #00ff41; color: #000; }
        .btn-whatsapp { background: #25D366; color: #fff; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-copy { background: #b00; color: #fff; }
        button:active { transform: translateY(3px); opacity: 0.9; }

        #output-area { margin-top: 25px; background: #000; padding: 10px; border-radius: 10px; border: 1px dashed #222; }
        pre { white-space: pre-wrap; font-size: 0.5rem; color: #333; max-height: 50px; overflow: hidden; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>

<div class="warp-bg"></div>

<div class="container">
    <h1>ZAMAN EDİTÖRÜ</h1>
    
    <div class="field">
        <span class="label">TARİH SEÇİMİ</span>
        <div class="date-row">
            <select id="sel-day" onchange="checkExisting()"></select>
            <select id="sel-month" onchange="checkExisting()"></select>
            <select id="sel-year" onchange="checkExisting()"></select>
        </div>
    </div>

    <div class="field">
        <span class="label">GÜNÜN VERİSİ</span>
        <textarea id="text-input" placeholder="Anlatmaya başlayın..."></textarea>
        
        <div class="toolbar">
            <div class="tool-btn" onclick="startDictation()" id="mic-tool">
                <svg viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/><path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/></svg>
                <span>SES</span>
            </div>
            <div class="tool-btn" onclick="document.getElementById('text-input').focus()">
                <svg viewBox="0 0 24 24"><path d="M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 7h-2v-2h2v2zm0-4h-2v-2h2v2z"/></svg>
                <span>KLAVYE</span>
            </div>
            <div class="tool-btn" onclick="pasteFromClipboard()">
                <svg viewBox="0 0 24 24"><path d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"/></svg>
                <span>YAPIŞTIR</span>
            </div>
        </div>
    </div>

    <div class="btn-group">
        <button class="btn-add" onclick="saveData()">LİSTEYE EKLE</button>
        <button class="btn-whatsapp" onclick="sendWhatsApp()">WHATSAPP YEDEK GÖNDER</button>
        <button class="btn-copy" onclick="copyData()">KODU KOPYALA</button>
    </div>

    <div id="output-area"><pre id="preview">const zamanVerisi = {};</pre></div>
</div>

<script src="data.js"></script>

<script>
    const months = ["OCAK", "SUBAT", "MART", "NISAN", "MAYIS", "HAZIRAN", "TEMMUZ", "AGUSTOS", "EYLUL", "EKIM", "KASIM", "ARALIK"];
    let currentData = typeof zamanVerisi !== 'undefined' ? zamanVerisi : {};

    function init() {
        // Günleri Doldur
        const d = document.getElementById('sel-day');
        d.innerHTML = '<option value="">GÜN</option>';
        for(let i=1; i<=31; i++) { let v = i<10?'0'+i:i; d.innerHTML += `<option value="${v}">${i}</option>`; }
        
        // Ayları Doldur
        const m = document.getElementById('sel-month');
        m.innerHTML = '<option value="">AY</option>';
        months.forEach((name, i) => { let v = (i+1)<10?'0'+(i+1):(i+1); m.innerHTML += `<option value="${v}">${name}</option>`; });

        // Yılları Doldur
        const y = document.getElementById('sel-year');
        y.innerHTML = '<option value="">YIL</option>';
        for(let i=1990; i<=1999; i++) { y.innerHTML += `<option value="${i}">${i}</option>`; }
        updatePreview();
    }

    function checkExisting() {
        const dd = document.getElementById('sel-day').value;
        const mm = document.getElementById('sel-month').value;
        const yy = document.getElementById('sel-year').value;
        const area = document.getElementById('text-input');
        
        if(dd && mm && yy) {
            const date = `${yy}-${mm}-${dd}`;
            if(currentData[date]) {
                area.value = currentData[date].replace(" [M]", "");
            } else { area.value = ""; }
        }
        updatePreview();
    }

    function startDictation() {
        if (window.hasOwnProperty('webkitSpeechRecognition')) {
            const recognition = new webkitSpeechRecognition();
            recognition.lang = "tr-TR";
            recognition.start();
            document.getElementById('mic-tool').classList.add('active');
            recognition.onresult = (e) => {
                document.getElementById('text-input').value += e.results[0][0].transcript;
                recognition.stop();
                document.getElementById('mic-tool').classList.remove('active');
            };
            recognition.onerror = () => { document.getElementById('mic-tool').classList.remove('active'); };
        } else { alert("Bu tarayıcı sesi desteklemiyor."); }
    }

    async function pasteFromClipboard() {
        try {
            const t = await navigator.clipboard.readText();
            document.getElementById('text-input').value += t;
        } catch (err) { alert("Lütfen manuel yapıştırın."); }
    }

    function saveData() {
        const dd = document.getElementById('sel-day').value;
        const mm = document.getElementById('sel-month').value;
        const yy = document.getElementById('sel-year').value;
        const text = document.getElementById('text-input').value;
        
        if(!dd || !mm || !yy || !text) { alert("Eksik veri!"); return; }
        const date = `${yy}-${mm}-${dd}`;
        currentData[date] = text + " [M]";
        updatePreview();
        alert("Başarıyla Eklendi!");
    }

    function updatePreview() {
        let code = "const zamanVerisi = {\n";
        const keys = Object.keys(currentData).sort();
        keys.forEach((k, i) => {
            code += `    "${k}": "${currentData[k].replace(/"/g, '\\"')}"${i===keys.length-1?"":","}\n`;
        });
        code += "};";
        document.getElementById('preview').innerText = code;
    }

    function sendWhatsApp() {
        const code = document.getElementById('preview').innerText;
        window.open(`https://wa.me/?text=${encodeURIComponent(code)}`, '_blank');
    }

    function copyData() {
        navigator.clipboard.writeText(document.getElementById('preview').innerText);
        alert("Kod kopyalandı!");
    }

    window.onload = init;
</script>
</body>
</html>
